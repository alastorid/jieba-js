<!DOCTYPE html>
<html>
  <head>
    <title>jieba-js demo</title>
    <link rel="icon" type="image/png" href="icon.png" />

    <!--
    <link rel="stylesheet" href="html-lib/style.css" />
    -->

    <script src="jquery.js"></script>
    <script src="require-jieba-js.js"></script>
    <link rel="stylesheet" href="html-lib/vendors/semantic-ui/semantic.min.css" />
    <script src="html-lib/vendors/semantic-ui/semantic.min.js"></script>
    <!-- <script src="html-lib/Garlic.js/garlic.js"></script> -->
    <script src="html-lib/input-file-loader.js"></script>
    <script src="html-lib/vendors/FileSaver.js"></script>
    <script src="html-lib/vendors/clipboard/clipboard.min.js"></script>
    <script src="html-lib/vendors/clipboard/puli-util.clipboard.js"></script>
    <script src="html-lib/vendors/puli-post-message-api/puli-post-message-api.min.js"></script>
    <script src="html-lib/vendors/vue/vue.min.js"></script>
    
    <link rel="stylesheet/less" type="text/css" href="html-lib/styles/styles.less" />
    <script>less = { env: 'production'};</script>
    <script src="html-lib/vendors/less/less.min.js"></script>
    
  </head>
  <body>


    <form onsubmit="return false;" class="ui form" id="app">

      <div class="ui grid"
           v-if="step === 0">
        <div class="row">
          <div class="ten wide column">
            <label class="ui header">Raw Text</label>
          </div>
          <div class="six wide column" style="text-align:right; margin-bottom: 5px;">
            <button class="ui mini icon basic button" onclick="$('#input_file').click();">
              <i class="folder open outline icon"></i>
            </button>
            <input type="file" class="input-field" 
                   id="input_file" load_content_to="#input" />
            <button class="ui mini icon basic button" copy-from="#input">
              <i class="copy icon"></i>
            </button>
          </div>
        </div>
        <div class="row">
          <div class="sixteen wide column">
            <!-- http://blog.fukuball.com/ru-he-shi-yong-jieba-jie-ba-zhong-wen-fen-ci-cheng-shi/ -->
            <textarea 
              name="input" 
              id="input" 
              class="ui raised fluid segment input-textarea"
              v-model="inputText"
              ></textarea>
          </div>
        </div>
      </div>

      <!-- =============================================================== -->
      
      <div class="ui grid configuration-step"
           v-if="step === 1">
        <div class="row">
          <div class="ten wide column">
            <label class="ui header">Configuration</label>
          </div>
          <div class="six wide column" style="text-align:right; margin-bottom: 5px;">
            <button class="ui mini icon basic button" onclick="$('#input_config_file').click();">
              <i class="folder open outline icon"></i>
            </button>
            <input type="file" class="input-field" 
                   id="input_config_file" />
            
            <button class="ui mini icon basic button"
                    v-on:click="downloadConfiguration">
                <i class="save outline icon"></i>
            </button>
            <button class="ui mini icon basic button" copy-from="#input">
              <i class="copy icon"></i>
            </button>
          </div>
        </div>
        
        <!-- ================================= -->
        
        <div class="row">
          <div class="sixteen wide column">
            <div class="ui form">
              
                <div class="two fields">
                  <div class="field">
                    
                    <label>
                      Segmentation Method
                    </label>
                    <div class="inline fields">
                      <div class="field">

                      </div>
                      <div class="field" v-on:click="segmentationMethod = 'dictionary'">
                        <input type="radio" v-model="segmentationMethod" value="dictionary" />
                        <label>Dictionary</label>
                      </div>
                      <div class="field">
                        <input type="radio" v-model="segmentationMethod" value="n-gram" />
                      </div>
                      <div class="field">
                        <input type="number" v-model="nGramLength" v-on:change="segmentationMethod = 'n-gram'" />
                      </div>
                      <div class="field clickable" v-on:click="segmentationMethod = 'n-gram'">
                        <label>
                          - gram
                        </label>  
                      </div>

                    </div>
                  </div>
                  <div class="field">
                    <label>
                      <a href="https://github.com/kristopolous/Porter-Stemmer/blob/master/README.md" 
                         target="_blank">
                        Use Porter Stemmer
                      </a>
                    </label>
                    <div class="inline fields">
                      <div class="field">
                        <input 
                        type="checkbox" 
                        tabindex="0" 
                        class="hidden"
                        id="usePorterStemmer"
                        v-model="usePorterStemmer">
                      </div>
                      <div class="field">
                        <label for="usePorterStemmer">Enable</label>
                      </div>
                    </div>
                  </div>
                </div>
                
            </div>
            
            <template v-if="segmentationMethod === 'dictionary'">
              <div class="inline fields">
                <div class="field">
                  <label class="ui header">
                    User Dictionary
                  </label>
                </div>
                <div class="field">
                  <button 
                    class="ui mini basic button" 
                    v-on:click="setExampleUserDictionary"
                    v-bind:class="{'disabled': (configUserDictionaryExample === configUserDictionary)}">
                    <i class="file alternate outline icon"></i>
                    example
                  </button>
                </div>
              </div>
              <div class="field">
                <textarea v-model="configUserDictionary"></textarea>
              </div>
            </template>
            <div class="field">
              <div class="inline fields">
                <div class="field">
                  <label class="ui header">
                    Word Remap
                  </label>
                </div>
                <div class="field">
                  <button 
                    class="ui mini basic button" 
                    v-on:click="setExampleWordRemap"
                    v-bind:class="{'disabled': (configWordRemapExample === configWordRemap)}">
                    <i class="file alternate outline icon"></i>
                    example
                  </button>
                </div>
              </div>
              <textarea v-model="configWordRemap"></textarea>
            </div>
            <div class="field">
              <div class="inline fields">
                <div class="field">
                  <label class="ui header">
                    Stop Words
                  </label>
                </div>
                <div class="field">
                  <button 
                    class="ui mini basic button" 
                    v-on:click="setExampleStopWords"
                    v-bind:class="{'disabled': (configStopWordsExample === configStopWords)}">
                    <i class="file alternate outline icon"></i>
                    example
                  </button>
                </div>
              </div>
              <textarea v-model="configStopWords"></textarea>
            </div>
          </div>
        </div>
      </div>
      
      <!-- =============================================================== -->

      <div class="ui grid output-step"
           v-if="step === 2">
        <div class="row">
          <div class="sixteen wide column">
            <label class="ui header">Output Segmentation Result</label>
          </div>
        </div>
        <div class="row">
          <div class="sixteen wide column">
            <textarea 
              name="output" 
              id="output" 
              class="ui raised segment output-textarea" 
              data-storage="false"
              v-model="outputText"
              ></textarea>
          </div>
        </div>
        <div class="row">
          <div class="column">
            <div class="ui fluid buttons">
              <button
                type="button"
                class="ui button"
                v-on:click="copyOutput">
                <i class="copy icon"></i>
                Copy
              </button>
              <button
                type="button"
                class="ui button"
                v-on:click="saveAsText">
                <i class="file alternate outline icon"></i>
                Save as text
              </button>
              <button
                type="button"
                class="ui button"
                v-on:click="saveAsSheet">
                <i class="table icon"></i>
                Save as sheet
              </button>
              <button
                type="button"
                class="ui button"
                v-on:click="drawWordCloud">
                <i class="cloud icon"></i>
                Draw word cloud
              </button>
              <button
                type="button"
                class="ui button"
                v-on:click="extractThemes">
                <i class="lightbulb outline icon"></i>
                Extract themes
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- =============================================================== -->

      <div class="ui bottom fixed menu">
        <div class="ui ordered fluid unstackable steps">
          <div class="step"
               v-bind:class="computedStepClass(0)"
               v-on:click="step=0">
            <div class="content">
              <div class="title">Input Raw Text</div>
            </div>
          </div>
          <div class="step"
               v-bind:class="computedStepClass(1)"
               v-on:click="step=1">
            <div class="content">
              <div class="title">Configuration</div>
            </div>
          </div>
          <div class="step"
               v-bind:class="computedStepClass(2)"
               v-on:click="step=2">
            <div class="content">
              <div class="title">Output Segmentation Result</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- =============================================================== -->
      
    </form>

    <!-- ========================================== -->

    <script src="html-lib/script.js"></script>
    <script src="html-lib/post-message.js"></script>
    <script src="html-lib/form-persist.js"></script>
    <script src="html-lib/vue-app.js"></script>

    <script src="html-lib/ga.js"></script>
  </body>
</html>